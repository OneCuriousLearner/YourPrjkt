# 各类地址

- 项目GitHub页面地址：
	[OneCuriousLearner/YourPrjkt: 一个融合了Motion Matching的简易UE游戏DEMO](https://github.com/OneCuriousLearner/YourPrjkt)
- 项目Gitee镜像仓库（未验证Git LFS支持，可能无法使用）：
	[YourPrjkt: 一个融合了Motion Matching的简易UE游戏DEMO](https://gitee.com/ChiTsuHa-Tau5_C/YourPrjkt)
- GASP项目官方文档：
	[虚幻引擎中的游戏动画示例项目 | 虚幻引擎 5.6 文档 | Epic Developer Community](https://dev.epicgames.com/documentation/zh-cn/unreal-engine/game-animation-sample-project-in-unreal-engine)

# 开发日志1_20250326
 
 - `VRM4U`插件导入MMD模型。
 - `KawaiiPhysics`绑定骨骼，实现头发、衣物、饰品飘动效果。
 - 第三人称项目模板小白人骨骼重定向为MMD骨骼。

# 开发日志3_20250402

- 迁移`Game Animation Sample Project (© Epic Games)`（GASP）的Sandbox角色蓝图与相关依赖到当前项目中。
- 通过IK重定向器和IK绑定资产将Sandbox重定向至MMD角色。
- 在`CBP_SandboxCharacter`蓝图文件中将Sandbox骨骼替换为MMD角色。

# 开发日志4_20250426

- 创建Pawn蓝图类（后称播音器），添加多层网格体各自独立旋转效果，实现无限随机播放11首音乐。
- 新增播音器“停止/播放”功能，通过`Player Controller`发送指令，当角色处于播音器`SphereCollition`范围内时可成功接收指令。
- 进入/离开播音器`SphereCollition`范围内时通过`Toggle Visibility`节点切换文字提示可视性（未实现UI跟随视角的效果）。
- 播音器停止播放时将停止旋转，隐藏Niagara效果。再次播放时继续旋转并显示Niagara效果。
- **BUG**：关卡开始时会将任意碰撞体设置为“已重叠”。尝试在Pawn蓝图中使用`Event Tick`将关卡开始第一秒内反复设定“玩家未重叠”变量，并最终解决。

# 开发日志5_20250430

- 新增沙滩村落地图（来自`Pirate Stilt Village Island Modular Pack (© Scale Z)`，已由限免转为收费）。
- 创建Pawn蓝图类传送门，处于外层`Box Collition`时通过时间轴节点更新`Rotation`开门，处于内层`Box Collition`时通过`Open Level`节点切换至沙滩村落地图，播放声音并通过Widget播放渐入渐出动画。
- 添加连击动画与逻辑，含四段脚踢动画与一段三连拳动画（来自`RamsterZ Free Anims Volume 1 (© RamsterZ)`），超过一秒无攻击操作重置连击计数与循环连击。
- 在Sandbox角色蓝图中找到跳跃与落地相关蓝图并添加Event状态通知，使得角色滞空时无法发动攻击。
- 添加简易HUD界面，当角色发动攻击时渐入，停止攻击五秒后渐出。
- 多次尝试打包游戏，但均在烘培期间遇到来自引擎源代码`GetLevel`函数的报错。

> 迫于课业压力，5月6月没有开发进度

# 开发日志6_20250707

- 完善游戏文案、音乐设定、游戏流程。
- 新增游戏开启页面，包含三个按钮（“开始游戏”、“特别鸣谢”、“退出游戏”），鼠标悬浮于按钮将播放对应动画与音效。通过使用摄像机Pawn与UMG实现背景视野噪点晃动。
- 新增特别鸣谢页面，并使用模糊背景与加深透明遮罩提高可读性。
- 最初希望在同一地图内完成“开始游戏”以后的逻辑，多次尝试重载`GameMode`实现地图内出生点与默认Pawn更换，均以失败告终，于是改为传送至另一关卡。
- UMG与Level蓝图的之间通信均通过蓝图接口实现。
- 新增继承自“播音器”的音乐播放器，可以根据交互结果实时更换音乐。
- UMG增加五个对话框与五个日记页面（因为不会搓对话系统）。
- 新增故事关联可交互物品，含UMG按钮（按下交互键同时播放动画）、碰撞球。交互之后弹出对应对话框与日记页面，在此期间游戏暂停以防止玩家输入，并且切换至对应的音乐。
- 面积较大的UMG，在出现与消失时都会播放过渡动画。

> 腾讯mini项目占用了7月剩下的时间，8月2日起继续开发

# 开发日志7_20250810

- 统一了UI字体颜色，特别鸣谢新增三位油管博主。
- 添加来自FAB的免费武器包（`Free Fantasy Weapon Sample Pack (© AFox1)`），调整角色摄像头参数以模拟电影风格，开始重构战斗系统。攻击重置时间仍为1秒，UI消失时间延长至8秒。
- 使用`Event Tick`添加渐变日照，当玩家与每件故事物品交互后日照角度会增加30度，找到5件并交互可体验从清晨到傍晚的日照变化。
- 由`Event Tick`实现的渐变日照可能导致日照效果不一致，修改为通过`Timelines`节点实现，并在每次变化后存储当前角度，实现无缝渐变日照，并保证多端体验一致。
- 再次尝试打包游戏，期间多次验证依赖与重新保存所有资产，调整所有名称相同的关卡，更新了`VRM4U`与`KawaiiPhysics`插件的最新版本，更新了过时动作资产，将主关卡的第一首BGM改为在菜单地图播放。最终发现是来自 `_Game/Level/` 目录下的关卡幽灵资产导致的打包问题，最终顺利打包并发布在项目GitHub网页的Pre-Release发布页。
- 更新菜单关卡的摄像头位置与视角，更改菜单关卡的日照角度为夕阳，删除了未使用的C++资产（`TemplateCharacter`）。
- 自行测试打包后的游戏，并填补了部分可能导致卡死的地形。
- 彩蛋地图中重新加入了可与Sandbox角色交互的物体，并更新了UI以实现跟随视角的效果。在主游戏地图中添加光照角度调试物品以在游戏中快速验证`Timelines`光照角度变换效果。
- 购买`Cool Sword Combat Anims V3 (© Bacengdu)`动作资产，使用单手剑动作替换原本的拳击动作，战斗系统添加“攻击期间根据WASD转向”功能（此功能可能导致意外的Sandbox动画抖动与移动错误，现已暂时弃用）。
- 使用骨骼网格体插槽将武器绑定至角色右手，将武器资产与攻击动画模块化以提高系统拓展性。
- **【重大更新】将引擎与所有插件由 5.4 更新至 5.5 版本**，将整体项目迁移至 `GASP 5.5` 项目以适应最新特性（网络联机支持，奔跑与下蹲支持，多镜头视角支持等），更换项目名称为`TideEater`，调整了所有失效的MMD角色IK绑定，删除项目所有C++内容并退化为纯蓝图项目。
- 新增镰刀战斗动作，可通过键盘数字键（1、2、0）切换武器或隐藏武器，通过增加图表与折叠函数等方式将战斗系统模块化以提高可读性，在Sandbox角色蓝图中设置跳跃期间无法攻击以避免动作鬼畜。
- 战斗系统添加0.3秒攻击缓冲功能以提高可操作性，所有静态网格体设为允许`Nanite`，Sandbox动画蓝图新增手部动画混合效果以改善手持武器姿势，允许地图流送、光线追踪、虚拟纹理以处理关卡加载与自发光物体闪烁问题。

# 开发日志8_20250813

- 新增退出页面，按下 `ESC` 时将会弹出，暂停游戏并显示鼠标，触发逻辑在`PlayerController`中。此页面包含所有键位与“退出游戏”按钮（按钮的风格与开启页面的“退出游戏”按钮一致）。
- 新增武器轨道追踪，通过动画状态通知开启/关闭追踪，在每一帧中绘制与上一帧的`Box Trace`，计算首尾插槽距离作为盒体`Size X`，用同样的插槽计算盒体朝向，以应对低帧率时轨迹覆盖率低的问题。
- 添加`Character`蓝图类NPC角色，创建`Actor Component`并添加Damage标签以用于在任何蓝图类中调用受击函数。
- `Box Collition`判定命中时，通过蓝图接口将伤害传递给拥有Damage标签的对象，并在每次攻击时使用数组存储已被攻击的Actor以防止重复响应。
- 添加特效资产 `Stylized Sword Trails VFX (© SERLO)` 作为挥动武器时的轨迹追踪效果，并在动画中绑定。
- 使用引擎自带`Niagara`资产作为命中敌人时的视觉反馈，并通过`Box Collition`节点获取命中位置，但最终视觉效果一般，决定弃用。
- 添加音效资产 `50 Free Game Sounds Pack (© PlaceHolder Inc)` 与 `Free Realistic Sword Sound Effects Pack (© Modern Monkey Studios)`，用于在挥剑与命中敌人时播放音效，通过创建音效数组变量实现随机播放。
- 某一根目录的中文命名文件导致了打包错误，确定问题之前，先后经历了VS插件更新、预编译引擎重装、源代码引擎编译、项目迁移至空项目，可谓费尽周折。
